{"remainingRequest":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\src\\cmps\\chat-room.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\src\\cmps\\chat-room.vue","mtime":1627123712927},{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626765022900},{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1626765019750},{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626765022900},{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1626765046571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBzb2NrZXRTZXJ2aWNlIH0gZnJvbSAiLi4vc2VydmljZXMvc29ja2V0LXNlcnZpY2UuanMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiB7DQogICAgdXNlcjogT2JqZWN0LA0KICAgIG1lYWw6IE9iamVjdA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtc2c6IHsgZnJvbTogdGhpcy51c2VyLmZ1bGxuYW1lLCB0eHQ6ICIiIH0sDQogICAgICBtc2dzOiBbXSwNCiAgICAgIHRvcGljOiAiIiwNCiAgICAgIHVzZXJJc1R5cGluZzogbnVsbCwNCiAgICAgIHRpbWVyOiBudWxsLA0KICAgICAgdGltZW91dFZhbDogMTAwMCwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMudG9waWMgPSB0aGlzLiRyb3V0ZS5wYXJhbXMubWVhbElkOw0KICAgIGNvbnNvbGUubG9nKCJ0aGlzLm1lYWwgOj4+ICIsIHRoaXMubWVhbCk7DQoNCiAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoImNoYXQgdG9waWMiLCB0aGlzLnRvcGljKTsNCiAgICBzb2NrZXRTZXJ2aWNlLm9uKCJjaGF0IGFkZE1zZyIsIHRoaXMuYWRkTXNnKTsNCiAgICBzb2NrZXRTZXJ2aWNlLm9uKCJjaGF0IHVzZXJUeXBlIiwgKHVzZXIpID0+IHsNCiAgICAgIHRoaXMudXNlcklzVHlwaW5nID0gdXNlcjsNCiAgICB9KTsNCiAgfSwNCiAgZGVzdHJveWVkKCkgew0KICAgIHNvY2tldFNlcnZpY2Uub2ZmKCJjaGF0IGFkZE1zZyIsIHRoaXMuYWRkTXNnKTsNCiAgICAvLyBzb2NrZXRTZXJ2aWNlLnRlcm1pbmF0ZSgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYWRkTXNnKG1zZykgew0KICAgICAgdGhpcy5tc2dzLnB1c2gobXNnKTsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMubWVhbCk7DQogICAgICB0aGlzLm1lYWwucHVzaChtc2cpOw0KICAgIC8vICAgdGhpcy4kZW1pdCgic2F2ZUNoYXRIaXN0b3J5IiwgdGhpcy5tZWFsKTsNCiAgICB9LA0KICAgIHNlbmRNc2coKSB7DQogICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoImNoYXQgbmV3TXNnIiwgdGhpcy5tc2cpOw0KICAgICAgLy8gbmV4dCBsaW5lIG5vdCBuZWVkZWQgYWZ0ZXIgY29ubmVjdGluZyB0byBiYWNrZW5kDQogICAgICAvLyB0aGlzLmFkZE1zZyh0aGlzLm1zZyk7DQogICAgICAvLyBzZXRUaW1lb3V0KCgpPT50aGlzLmFkZE1zZyh7ZnJvbTogJ0R1bW15JywgdHh0OiAnWWV5J30pLCAyMDAwKQ0KICAgICAgdGhpcy5tc2cgPSB7IGZyb206IHRoaXMudXNlci5mdWxsbmFtZSwgdHh0OiAiIiB9Ow0KICAgIH0sDQogICAgY2hhbmdlVG9waWMoKSB7DQogICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoImNoYXQgdG9waWMiLCB0aGlzLnRvcGljKTsNCiAgICB9LA0KICAgIGhhbmRsZUtleVVwKCkgew0KICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOw0KICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoImNoYXQgdXNlclR5cGluZyIsIG51bGwpOw0KICAgICAgICAvLyB0aGlzLnVzZXJJc1R5cGluZyA9IGZhbHNlOw0KICAgICAgfSwgMTAwMCk7DQogICAgfSwNCiAgICBoYW5kbGVLZXlQcmVzcygpIHsNCiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsNCiAgICAgIHNvY2tldFNlcnZpY2UuZW1pdCgiY2hhdCB1c2VyVHlwaW5nIiwgdGhpcy51c2VyKTsNCiAgICAgIC8vIHRoaXMudXNlcklzVHlwaW5nID0gdHJ1ZTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["chat-room.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chat-room.vue","sourceRoot":"src/cmps","sourcesContent":["<template>\r\n  <section v-if=\"meal\" class=\"chat-box\">\r\n    <header class=\"chat-header\"></header>\r\n    <main class=\"chat-main\">\r\n      <ul class=\"chat-msgs\">\r\n        <li>\r\n          <span class=\"from\">{{ msg.from }}:</span>\r\n          <span>{{ msg.txt }}</span>\r\n        </li>\r\n      </ul>\r\n    </main>\r\n    <footer class=\"chat-input\">\r\n      <form @submit.prevent=\"sendMsg\">\r\n        <input\r\n          @keypress=\"handleKeyPress\"\r\n          @keyup=\"handleKeyUp\"\r\n          type=\"text\"\r\n          v-model=\"msg.txt\"\r\n          placeholder=\"Your msg\"\r\n        />\r\n        <button @click.prevent=\"sendMsg\">Send</button>\r\n      </form>\r\n    </footer>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { socketService } from \"../services/socket-service.js\";\r\n\r\nexport default {\r\n  props: {\r\n    user: Object,\r\n    meal: Object\r\n  },\r\n  data() {\r\n    return {\r\n      msg: { from: this.user.fullname, txt: \"\" },\r\n      msgs: [],\r\n      topic: \"\",\r\n      userIsTyping: null,\r\n      timer: null,\r\n      timeoutVal: 1000,\r\n    };\r\n  },\r\n  created() {\r\n    this.topic = this.$route.params.mealId;\r\n    console.log(\"this.meal :>> \", this.meal);\r\n\r\n    socketService.emit(\"chat topic\", this.topic);\r\n    socketService.on(\"chat addMsg\", this.addMsg);\r\n    socketService.on(\"chat userType\", (user) => {\r\n      this.userIsTyping = user;\r\n    });\r\n  },\r\n  destroyed() {\r\n    socketService.off(\"chat addMsg\", this.addMsg);\r\n    // socketService.terminate();\r\n  },\r\n  methods: {\r\n    addMsg(msg) {\r\n      this.msgs.push(msg);\r\n      console.log(this.meal);\r\n      this.meal.push(msg);\r\n    //   this.$emit(\"saveChatHistory\", this.meal);\r\n    },\r\n    sendMsg() {\r\n      socketService.emit(\"chat newMsg\", this.msg);\r\n      // next line not needed after connecting to backend\r\n      // this.addMsg(this.msg);\r\n      // setTimeout(()=>this.addMsg({from: 'Dummy', txt: 'Yey'}), 2000)\r\n      this.msg = { from: this.user.fullname, txt: \"\" };\r\n    },\r\n    changeTopic() {\r\n      socketService.emit(\"chat topic\", this.topic);\r\n    },\r\n    handleKeyUp() {\r\n      clearTimeout(this.timer);\r\n      this.timer = setTimeout(() => {\r\n        socketService.emit(\"chat userTyping\", null);\r\n        // this.userIsTyping = false;\r\n      }, 1000);\r\n    },\r\n    handleKeyPress() {\r\n      clearTimeout(this.timer);\r\n      socketService.emit(\"chat userTyping\", this.user);\r\n      // this.userIsTyping = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}