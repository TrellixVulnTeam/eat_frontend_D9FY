{"remainingRequest":"C:\\Users\\shani.VOICESENSE\\Documents\\CodingAcademy\\Ex-Submissions\\Shani Herzinger\\eat-with\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\shani.VOICESENSE\\Documents\\CodingAcademy\\Ex-Submissions\\Shani Herzinger\\eat-with\\frontend\\src\\services\\async-storage-service.js","dependencies":[{"path":"C:\\Users\\shani.VOICESENSE\\Documents\\CodingAcademy\\Ex-Submissions\\Shani Herzinger\\eat-with\\frontend\\src\\services\\async-storage-service.js","mtime":1626279225254},{"path":"C:\\Users\\shani.VOICESENSE\\Documents\\CodingAcademy\\Ex-Submissions\\Shani Herzinger\\eat-with\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626260724928},{"path":"C:\\Users\\shani.VOICESENSE\\Documents\\CodingAcademy\\Ex-Submissions\\Shani Herzinger\\eat-with\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1626260715884}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGNvbnN0IGFzeW5jU3RvcmFnZVNlcnZpY2UgPSB7CiAgcXVlcnksCiAgZ2V0LAogIHBvc3QsCiAgcHV0LAogIHJlbW92ZQp9OwoKZnVuY3Rpb24gcXVlcnkoZW50aXR5VHlwZSwgZGVsYXkgPSA1MDApIHsKICB2YXIgZW50aXRpZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVudGl0eVR5cGUpKSB8fCBbXTsKICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgcmVzb2x2ZShlbnRpdGllcyk7CiAgICB9LCBkZWxheSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldChlbnRpdHlUeXBlLCBlbnRpdHlJZCkgewogIHJldHVybiBxdWVyeShlbnRpdHlUeXBlKS50aGVuKGVudGl0aWVzID0+IGVudGl0aWVzLmZpbmQoZW50aXR5ID0+IGVudGl0eS5faWQgPT09IGVudGl0eUlkKSk7Cn0KCmZ1bmN0aW9uIHBvc3QoZW50aXR5VHlwZSwgbmV3RW50aXR5KSB7CiAgbmV3RW50aXR5Ll9pZCA9IF9tYWtlSWQoKTsKICByZXR1cm4gcXVlcnkoZW50aXR5VHlwZSkudGhlbihlbnRpdGllcyA9PiB7CiAgICBlbnRpdGllcy5wdXNoKG5ld0VudGl0eSk7CgogICAgX3NhdmUoZW50aXR5VHlwZSwgZW50aXRpZXMpOwoKICAgIHJldHVybiBuZXdFbnRpdHk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHB1dChlbnRpdHlUeXBlLCB1cGRhdGVkRW50aXR5KSB7CiAgcmV0dXJuIHF1ZXJ5KGVudGl0eVR5cGUpLnRoZW4oZW50aXRpZXMgPT4gewogICAgY29uc3QgaWR4ID0gZW50aXRpZXMuZmluZEluZGV4KGVudGl0eSA9PiBlbnRpdHkuX2lkID09PSB1cGRhdGVkRW50aXR5Ll9pZCk7CiAgICBlbnRpdGllcy5zcGxpY2UoaWR4LCAxLCB1cGRhdGVkRW50aXR5KTsKCiAgICBfc2F2ZShlbnRpdHlUeXBlLCBlbnRpdGllcyk7CgogICAgcmV0dXJuIHVwZGF0ZWRFbnRpdHk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHJlbW92ZShlbnRpdHlUeXBlLCBlbnRpdHlJZCkgewogIHJldHVybiBxdWVyeShlbnRpdHlUeXBlKS50aGVuKGVudGl0aWVzID0+IHsKICAgIGNvbnN0IGlkeCA9IGVudGl0aWVzLmZpbmRJbmRleChlbnRpdHkgPT4gZW50aXR5Ll9pZCA9PT0gZW50aXR5SWQpOwogICAgaWYgKGlkeCA8IDApIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBFbnRpdHkgJHtlbnRpdHlJZH1gKTsKICAgIGVudGl0aWVzLnNwbGljZShpZHgsIDEpOwoKICAgIF9zYXZlKGVudGl0eVR5cGUsIGVudGl0aWVzKTsKICB9KTsKfQoKZnVuY3Rpb24gX3NhdmUoZW50aXR5VHlwZSwgZW50aXRpZXMpIHsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShlbnRpdHlUeXBlLCBKU09OLnN0cmluZ2lmeShlbnRpdGllcykpOwp9CgpmdW5jdGlvbiBfbWFrZUlkKGxlbmd0aCA9IDUpIHsKICB2YXIgdGV4dCA9ICcnOwogIHZhciBwb3NzaWJsZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwogIH0KCiAgcmV0dXJuIHRleHQ7Cn0="},{"version":3,"sources":["C:/Users/shani.VOICESENSE/Documents/CodingAcademy/Ex-Submissions/Shani Herzinger/eat-with/frontend/src/services/async-storage-service.js"],"names":["asyncStorageService","query","get","post","put","remove","entityType","delay","entities","JSON","parse","localStorage","getItem","Promise","resolve","setTimeout","entityId","then","find","entity","_id","newEntity","_makeId","push","_save","updatedEntity","idx","findIndex","splice","Error","setItem","stringify","length","text","possible","i","charAt","Math","floor","random"],"mappings":"AACA,OAAO,MAAMA,mBAAmB,GAAG;AAC/BC,EAAAA,KAD+B;AAE/BC,EAAAA,GAF+B;AAG/BC,EAAAA,IAH+B;AAI/BC,EAAAA,GAJ+B;AAK/BC,EAAAA;AAL+B,CAA5B;;AAQP,SAASJ,KAAT,CAAeK,UAAf,EAA2BC,KAAK,GAAC,GAAjC,EAAsC;AAClC,MAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBN,UAArB,CAAX,KAAgD,EAA/D;AACA,SAAO,IAAIO,OAAJ,CAAaC,OAAD,IAAW;AAC1BC,IAAAA,UAAU,CAAC,MAAI;AACXD,MAAAA,OAAO,CAACN,QAAD,CAAP;AACH,KAFS,EAEPD,KAFO,CAAV;AAGH,GAJM,CAAP;AAKH;;AAED,SAASL,GAAT,CAAaI,UAAb,EAAyBU,QAAzB,EAAmC;AAC/B,SAAOf,KAAK,CAACK,UAAD,CAAL,CACFW,IADE,CACGT,QAAQ,IAAIA,QAAQ,CAACU,IAAT,CAAcC,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAeJ,QAAvC,CADf,CAAP;AAEH;;AACD,SAASb,IAAT,CAAcG,UAAd,EAA0Be,SAA1B,EAAqC;AACjCA,EAAAA,SAAS,CAACD,GAAV,GAAgBE,OAAO,EAAvB;AACA,SAAOrB,KAAK,CAACK,UAAD,CAAL,CACFW,IADE,CACGT,QAAQ,IAAI;AACdA,IAAAA,QAAQ,CAACe,IAAT,CAAcF,SAAd;;AACAG,IAAAA,KAAK,CAAClB,UAAD,EAAaE,QAAb,CAAL;;AACA,WAAOa,SAAP;AACH,GALE,CAAP;AAMH;;AAED,SAASjB,GAAT,CAAaE,UAAb,EAAyBmB,aAAzB,EAAwC;AACpC,SAAOxB,KAAK,CAACK,UAAD,CAAL,CACFW,IADE,CACGT,QAAQ,IAAI;AACd,UAAMkB,GAAG,GAAGlB,QAAQ,CAACmB,SAAT,CAAmBR,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAeK,aAAa,CAACL,GAA1D,CAAZ;AACAZ,IAAAA,QAAQ,CAACoB,MAAT,CAAgBF,GAAhB,EAAqB,CAArB,EAAwBD,aAAxB;;AACAD,IAAAA,KAAK,CAAClB,UAAD,EAAaE,QAAb,CAAL;;AACA,WAAOiB,aAAP;AACH,GANE,CAAP;AAOH;;AAED,SAASpB,MAAT,CAAgBC,UAAhB,EAA4BU,QAA5B,EAAsC;AAClC,SAAOf,KAAK,CAACK,UAAD,CAAL,CACFW,IADE,CACGT,QAAQ,IAAI;AACd,UAAMkB,GAAG,GAAGlB,QAAQ,CAACmB,SAAT,CAAmBR,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAeJ,QAA5C,CAAZ;AACA,QAAIU,GAAG,GAAG,CAAV,EAAa,MAAM,IAAIG,KAAJ,CAAW,kBAAiBb,QAAS,EAArC,CAAN;AACbR,IAAAA,QAAQ,CAACoB,MAAT,CAAgBF,GAAhB,EAAqB,CAArB;;AACAF,IAAAA,KAAK,CAAClB,UAAD,EAAaE,QAAb,CAAL;AACH,GANE,CAAP;AAOH;;AAGD,SAASgB,KAAT,CAAelB,UAAf,EAA2BE,QAA3B,EAAqC;AACjCG,EAAAA,YAAY,CAACmB,OAAb,CAAqBxB,UAArB,EAAiCG,IAAI,CAACsB,SAAL,CAAevB,QAAf,CAAjC;AACH;;AAED,SAASc,OAAT,CAAiBU,MAAM,GAAG,CAA1B,EAA6B;AACzB,MAAIC,IAAI,GAAG,EAAX;AACA,MAAIC,QAAQ,GAAG,gEAAf;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAApB,EAA4BG,CAAC,EAA7B,EAAiC;AAC7BF,IAAAA,IAAI,IAAIC,QAAQ,CAACE,MAAT,CAAgBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBL,QAAQ,CAACF,MAApC,CAAhB,CAAR;AACH;;AACD,SAAOC,IAAP;AACH","sourcesContent":["\r\nexport const asyncStorageService = {\r\n    query,\r\n    get,\r\n    post,\r\n    put,\r\n    remove,\r\n}\r\n\r\nfunction query(entityType, delay=500) {\r\n    var entities = JSON.parse(localStorage.getItem(entityType)) || []\r\n    return new Promise((resolve)=>{\r\n        setTimeout(()=>{\r\n            resolve(entities)\r\n        }, delay)\r\n    })\r\n}\r\n\r\nfunction get(entityType, entityId) {\r\n    return query(entityType)\r\n        .then(entities => entities.find(entity => entity._id === entityId))\r\n}\r\nfunction post(entityType, newEntity) {\r\n    newEntity._id = _makeId()\r\n    return query(entityType)\r\n        .then(entities => {\r\n            entities.push(newEntity)\r\n            _save(entityType, entities)\r\n            return newEntity\r\n        })\r\n}\r\n\r\nfunction put(entityType, updatedEntity) {\r\n    return query(entityType)\r\n        .then(entities => {\r\n            const idx = entities.findIndex(entity => entity._id === updatedEntity._id)\r\n            entities.splice(idx, 1, updatedEntity)\r\n            _save(entityType, entities)\r\n            return updatedEntity\r\n        })\r\n}\r\n\r\nfunction remove(entityType, entityId) {\r\n    return query(entityType)\r\n        .then(entities => {\r\n            const idx = entities.findIndex(entity => entity._id === entityId)\r\n            if (idx < 0) throw new Error(`Unknown Entity ${entityId}`)\r\n            entities.splice(idx, 1)\r\n            _save(entityType, entities)\r\n        })\r\n}\r\n\r\n\r\nfunction _save(entityType, entities) {\r\n    localStorage.setItem(entityType, JSON.stringify(entities))\r\n}\r\n\r\nfunction _makeId(length = 5) {\r\n    var text = ''\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length))\r\n    }\r\n    return text\r\n}"]}]}