{"remainingRequest":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\src\\store\\modules\\order-store.js","dependencies":[{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\src\\store\\modules\\order-store.js","mtime":1627190094173},{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626765022900},{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1626765019750}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gaW1wb3J0IHsgb3JkZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvb3JkZXItc2VydmljZS5qcycKaW1wb3J0IHsgTkVXb3JkZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvTkVXLW9yZGVyLXNlcnZpY2UuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHsKICAgIG9yZGVyczogW10KICB9LAogIGdldHRlcnM6IHsKICAgIG9yZGVycyhzdGF0ZSkgewogICAgICAvLyBjb25zb2xlLmxvZygnc3RhdGUub3JkZXJzJyxzdGF0ZS5vcmRlcnMpOwogICAgICByZXR1cm4gc3RhdGUub3JkZXJzOwogICAgfSwKCiAgICBvcmRlcnNUb1Nob3coc3RhdGUpIHsvLyBjb25zb2xlLmxvZyh0aGlzLnVzZXIpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm9yZGVycyk7CiAgICAgIC8vIGNvbnN0IG9yZGVycyA9IHRoaXMuJHN0b3JlLmdldHRlcnMub3JkZXJzOwogICAgICAvLyByZXR1cm4gdGhpcy5vcmRlcnMuZmlsdGVyKChvcmRlcikgPT4gb3JkZXIuYnV5ZXIuX2lkID09PSB0aGlzLnVzZXIuX2lkKTsKICAgIH0KCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHVwZGF0ZU9yZGVyKHN0YXRlLCB7CiAgICAgIG9yZGVyCiAgICB9KSB7CiAgICAgIHZhciBpZHggPSBzdGF0ZS5vcmRlcnMuZmluZEluZGV4KGN1cnJPcmRlciA9PiBjdXJyT3JkZXIuX2lkID09PSBvcmRlci5faWQpOwogICAgICBzdGF0ZS5vcmRlcnMuc3BsaWNlKGlkeCwgMSwgb3JkZXIpOwogICAgfSwKCiAgICBhZGRPcmRlcihzdGF0ZSwgewogICAgICBvcmRlcgogICAgfSkgewogICAgICBzdGF0ZS5vcmRlcnMucHVzaChvcmRlcik7CiAgICB9LAoKICAgIHNldE9yZGVycyhzdGF0ZSwgewogICAgICBvcmRlcnMKICAgIH0pIHsKICAgICAgc3RhdGUub3JkZXJzID0gb3JkZXJzOwogICAgfSAvLyBzZXRVc2VyT3JkZXJzKHN0YXRlLCB7IHVzZXIgfSkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCd1c2VydXNlcicsIHVzZXIpOwogICAgLy8gICAgIGNvbnNvbGUubG9nKCdzdGF0ZS5vcmRlcnMnLCBzdGF0ZS5vcmRlcnMpOwogICAgLy8gfQoKCiAgfSwKICBhY3Rpb25zOiB7CiAgICBhc3luYyBzYXZlT3JkZXIoewogICAgICBjb21taXQKICAgIH0sIHBheWxvYWQpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB0eXBlID0gcGF5bG9hZC5vcmRlci5faWQgPyAndXBkYXRlT3JkZXInIDogJ2FkZE9yZGVyJzsgLy8gY29uc3Qgc2F2ZWRPcmRlciA9IGF3YWl0IG9yZGVyU2VydmljZS5zYXZlKHBheWxvYWQub3JkZXIpCgogICAgICAgIGNvbnN0IHNhdmVkT3JkZXIgPSBhd2FpdCBORVdvcmRlclNlcnZpY2UuYWRkKHBheWxvYWQub3JkZXIpOwogICAgICAgIGNvbW1pdCh7CiAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgb3JkZXI6IHBheWxvYWQub3JkZXIKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gc2F2ZWRPcmRlcjsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2Nhbm50b3Qgc2F2ZSBvcmRlcicsIHBheWxvYWQub3JkZXIsIGVycik7CiAgICAgICAgdGhyb3cgZXJyOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGxvYWRPcmRlcnMoewogICAgICBjb21taXQKICAgIH0pIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBORVdvcmRlclNlcnZpY2UucXVlcnkoKTsKICAgICAgICBjb21taXQoewogICAgICAgICAgdHlwZTogJ3NldE9yZGVycycsCiAgICAgICAgICBvcmRlcnMKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gb3JkZXJzOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygnZXJyIGluIGxvYWRPcmRlcnMgZnVuY3Rpb246JywgZXJyKTsKICAgICAgICB0aHJvdyBlcnI7CiAgICAgIH0KICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/shilo/OneDrive/שולחן העבודה/eatWith/frontend/src/store/modules/order-store.js"],"names":["NEWorderService","state","orders","getters","ordersToShow","mutations","updateOrder","order","idx","findIndex","currOrder","_id","splice","addOrder","push","setOrders","actions","saveOrder","commit","payload","type","savedOrder","add","err","console","log","loadOrders","query"],"mappings":"AAAA;AACA,SAASA,eAAT,QAAgC,qCAAhC;AAEA,eAAe;AACXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAE;AADL,GADI;AAKXC,EAAAA,OAAO,EAAE;AACLD,IAAAA,MAAM,CAACD,KAAD,EAAQ;AACV;AACA,aAAOA,KAAK,CAACC,MAAb;AACH,KAJI;;AAMLE,IAAAA,YAAY,CAACH,KAAD,EAAQ,CAChB;AACA;AACA;AACA;AACH;;AAXI,GALE;AAoBXI,EAAAA,SAAS,EAAE;AACPC,IAAAA,WAAW,CAACL,KAAD,EAAQ;AAAEM,MAAAA;AAAF,KAAR,EAAmB;AAC1B,UAAIC,GAAG,GAAGP,KAAK,CAACC,MAAN,CAAaO,SAAb,CAAuBC,SAAS,IAAIA,SAAS,CAACC,GAAV,KAAkBJ,KAAK,CAACI,GAA5D,CAAV;AACAV,MAAAA,KAAK,CAACC,MAAN,CAAaU,MAAb,CAAoBJ,GAApB,EAAyB,CAAzB,EAA4BD,KAA5B;AACH,KAJM;;AAKPM,IAAAA,QAAQ,CAACZ,KAAD,EAAQ;AAAEM,MAAAA;AAAF,KAAR,EAAmB;AACvBN,MAAAA,KAAK,CAACC,MAAN,CAAaY,IAAb,CAAkBP,KAAlB;AACH,KAPM;;AASPQ,IAAAA,SAAS,CAACd,KAAD,EAAQ;AAAEC,MAAAA;AAAF,KAAR,EAAoB;AACzBD,MAAAA,KAAK,CAACC,MAAN,GAAeA,MAAf;AACH,KAXM,CAaP;AACA;AACA;AACA;;;AAhBO,GApBA;AAwCXc,EAAAA,OAAO,EAAE;AACL,UAAMC,SAAN,CAAgB;AAAEC,MAAAA;AAAF,KAAhB,EAA4BC,OAA5B,EAAqC;AACjC,UAAI;AACA,cAAMC,IAAI,GAAID,OAAO,CAACZ,KAAR,CAAcI,GAAf,GAAsB,aAAtB,GAAsC,UAAnD,CADA,CAEA;;AACA,cAAMU,UAAU,GAAG,MAAMrB,eAAe,CAACsB,GAAhB,CAAoBH,OAAO,CAACZ,KAA5B,CAAzB;AACAW,QAAAA,MAAM,CAAC;AAAEE,UAAAA,IAAI,EAAEA,IAAR;AAAcb,UAAAA,KAAK,EAAEY,OAAO,CAACZ;AAA7B,SAAD,CAAN;AACA,eAAOc,UAAP;AAEH,OAPD,CAOE,OAAOE,GAAP,EAAY;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCN,OAAO,CAACZ,KAA1C,EAAiDgB,GAAjD;AACA,cAAMA,GAAN;AACH;AACJ,KAbI;;AAeL,UAAMG,UAAN,CAAiB;AAAER,MAAAA;AAAF,KAAjB,EAA6B;AACzB,UAAI;AACA,cAAMhB,MAAM,GAAG,MAAMF,eAAe,CAAC2B,KAAhB,EAArB;AACAT,QAAAA,MAAM,CAAC;AAAEE,UAAAA,IAAI,EAAE,WAAR;AAAqBlB,UAAAA;AAArB,SAAD,CAAN;AACA,eAAOA,MAAP;AACH,OAJD,CAIE,OAAOqB,GAAP,EAAY;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CF,GAA3C;AACA,cAAMA,GAAN;AACH;AACJ;;AAxBI;AAxCE,CAAf","sourcesContent":["// import { orderService } from '../../services/order-service.js'\r\nimport { NEWorderService } from '../../services/NEW-order-service.js'\r\n\r\nexport default {\r\n    state: {\r\n        orders: [],\r\n    },\r\n\r\n    getters: {\r\n        orders(state) {\r\n            // console.log('state.orders',state.orders);\r\n            return state.orders\r\n        },\r\n\r\n        ordersToShow(state) {\r\n            // console.log(this.user);\r\n            // console.log(this.orders);\r\n            // const orders = this.$store.getters.orders;\r\n            // return this.orders.filter((order) => order.buyer._id === this.user._id);\r\n        },\r\n\r\n    },\r\n\r\n    mutations: {\r\n        updateOrder(state, { order }) {\r\n            var idx = state.orders.findIndex(currOrder => currOrder._id === order._id)\r\n            state.orders.splice(idx, 1, order)\r\n        },\r\n        addOrder(state, { order }) {\r\n            state.orders.push(order)\r\n        },\r\n\r\n        setOrders(state, { orders }) {\r\n            state.orders = orders\r\n        },\r\n\r\n        // setUserOrders(state, { user }) {\r\n        //     console.log('useruser', user);\r\n        //     console.log('state.orders', state.orders);\r\n        // }\r\n\r\n    },\r\n\r\n    actions: {\r\n        async saveOrder({ commit }, payload) {\r\n            try {\r\n                const type = (payload.order._id) ? 'updateOrder' : 'addOrder';\r\n                // const savedOrder = await orderService.save(payload.order)\r\n                const savedOrder = await NEWorderService.add(payload.order)\r\n                commit({ type: type, order: payload.order })\r\n                return savedOrder\r\n\r\n            } catch (err) {\r\n                console.log('canntot save order', payload.order, err)\r\n                throw err\r\n            }\r\n        },\r\n\r\n        async loadOrders({ commit }) {\r\n            try {\r\n                const orders = await NEWorderService.query()\r\n                commit({ type: 'setOrders', orders })\r\n                return orders\r\n            } catch (err) {\r\n                console.log('err in loadOrders function:', err)\r\n                throw err\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n}"]}]}