{"remainingRequest":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\src\\store\\modules\\order-store.js","dependencies":[{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\src\\store\\modules\\order-store.js","mtime":1627043354704},{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626765022900},{"path":"C:\\Users\\shilo\\OneDrive\\שולחן העבודה\\eatWith\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1626765019750}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgb3JkZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvb3JkZXItc2VydmljZS5qcyc7CmltcG9ydCB7IE5FV29yZGVyU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL05FVy1vcmRlci1zZXJ2aWNlLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICBvcmRlcnM6IFtdCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBvcmRlcnMoc3RhdGUpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ3N0YXRlLm9yZGVycycsc3RhdGUub3JkZXJzKTsKICAgICAgcmV0dXJuIHN0YXRlLm9yZGVyczsKICAgIH0sCgogICAgb3JkZXJzVG9TaG93KHN0YXRlKSB7Ly8gY29uc29sZS5sb2codGhpcy51c2VyKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5vcmRlcnMpOwogICAgICAvLyBjb25zdCBvcmRlcnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLm9yZGVyczsKICAgICAgLy8gcmV0dXJuIHRoaXMub3JkZXJzLmZpbHRlcigob3JkZXIpID0+IG9yZGVyLmJ1eWVyLl9pZCA9PT0gdGhpcy51c2VyLl9pZCk7CiAgICB9CgogIH0sCiAgbXV0YXRpb25zOiB7CiAgICB1cGRhdGVPcmRlcihzdGF0ZSwgewogICAgICBvcmRlcgogICAgfSkgewogICAgICB2YXIgaWR4ID0gc3RhdGUub3JkZXJzLmZpbmRJbmRleChjdXJyT3JkZXIgPT4gY3Vyck9yZGVyLl9pZCA9PT0gb3JkZXIuX2lkKTsKICAgICAgc3RhdGUub3JkZXJzLnNwbGljZShpZHgsIDEsIG9yZGVyKTsKICAgIH0sCgogICAgYWRkT3JkZXIoc3RhdGUsIHsKICAgICAgb3JkZXIKICAgIH0pIHsKICAgICAgc3RhdGUub3JkZXJzLnB1c2gob3JkZXIpOwogICAgfSwKCiAgICBzZXRPcmRlcnMoc3RhdGUsIHsKICAgICAgb3JkZXJzCiAgICB9KSB7CiAgICAgIHN0YXRlLm9yZGVycyA9IG9yZGVyczsKICAgIH0gLy8gc2V0VXNlck9yZGVycyhzdGF0ZSwgeyB1c2VyIH0pIHsKICAgIC8vICAgICBjb25zb2xlLmxvZygndXNlcnVzZXInLCB1c2VyKTsKICAgIC8vICAgICBjb25zb2xlLmxvZygnc3RhdGUub3JkZXJzJywgc3RhdGUub3JkZXJzKTsKICAgIC8vIH0KCgogIH0sCiAgYWN0aW9uczogewogICAgYXN5bmMgc2F2ZU9yZGVyKHsKICAgICAgY29tbWl0CiAgICB9LCBwYXlsb2FkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdHlwZSA9IHBheWxvYWQub3JkZXIuX2lkID8gJ3VwZGF0ZU9yZGVyJyA6ICdhZGRPcmRlcic7IC8vIGNvbnN0IHNhdmVkT3JkZXIgPSBhd2FpdCBvcmRlclNlcnZpY2Uuc2F2ZShwYXlsb2FkLm9yZGVyKQoKICAgICAgICBjb25zdCBzYXZlZE9yZGVyID0gYXdhaXQgTkVXb3JkZXJTZXJ2aWNlLmFkZChwYXlsb2FkLm9yZGVyKTsKICAgICAgICBjb21taXQoewogICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgIG9yZGVyOiBwYXlsb2FkLm9yZGVyCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHNhdmVkT3JkZXI7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCdjYW5udG90IHNhdmUgb3JkZXInLCBwYXlsb2FkLm9yZGVyLCBlcnIpOwogICAgICAgIHRocm93IGVycjsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBsb2FkT3JkZXJzKHsKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgTkVXb3JkZXJTZXJ2aWNlLnF1ZXJ5KCk7CiAgICAgICAgY29tbWl0KHsKICAgICAgICAgIHR5cGU6ICdzZXRPcmRlcnMnLAogICAgICAgICAgb3JkZXJzCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG9yZGVyczsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2VyciBpbiBsb2FkT3JkZXJzIGZ1bmN0aW9uOicsIGVycik7CiAgICAgICAgdGhyb3cgZXJyOwogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"sources":["C:/Users/shilo/OneDrive/שולחן העבודה/eatWith/frontend/src/store/modules/order-store.js"],"names":["orderService","NEWorderService","state","orders","getters","ordersToShow","mutations","updateOrder","order","idx","findIndex","currOrder","_id","splice","addOrder","push","setOrders","actions","saveOrder","commit","payload","type","savedOrder","add","err","console","log","loadOrders","query"],"mappings":"AAAA,SAASA,YAAT,QAA6B,iCAA7B;AACA,SAASC,eAAT,QAAgC,qCAAhC;AAEA,eAAe;AACXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAE;AADL,GADI;AAKXC,EAAAA,OAAO,EAAE;AACLD,IAAAA,MAAM,CAACD,KAAD,EAAQ;AACV;AACA,aAAOA,KAAK,CAACC,MAAb;AACH,KAJI;;AAMLE,IAAAA,YAAY,CAACH,KAAD,EAAQ,CAChB;AACA;AACA;AACA;AACH;;AAXI,GALE;AAoBXI,EAAAA,SAAS,EAAE;AACPC,IAAAA,WAAW,CAACL,KAAD,EAAQ;AAAEM,MAAAA;AAAF,KAAR,EAAmB;AAC1B,UAAIC,GAAG,GAAGP,KAAK,CAACC,MAAN,CAAaO,SAAb,CAAuBC,SAAS,IAAIA,SAAS,CAACC,GAAV,KAAkBJ,KAAK,CAACI,GAA5D,CAAV;AACAV,MAAAA,KAAK,CAACC,MAAN,CAAaU,MAAb,CAAoBJ,GAApB,EAAyB,CAAzB,EAA4BD,KAA5B;AACH,KAJM;;AAKPM,IAAAA,QAAQ,CAACZ,KAAD,EAAQ;AAAEM,MAAAA;AAAF,KAAR,EAAmB;AACvBN,MAAAA,KAAK,CAACC,MAAN,CAAaY,IAAb,CAAkBP,KAAlB;AACH,KAPM;;AASPQ,IAAAA,SAAS,CAACd,KAAD,EAAQ;AAAEC,MAAAA;AAAF,KAAR,EAAoB;AACzBD,MAAAA,KAAK,CAACC,MAAN,GAAeA,MAAf;AACH,KAXM,CAaP;AACA;AACA;AACA;;;AAhBO,GApBA;AAwCXc,EAAAA,OAAO,EAAE;AACL,UAAMC,SAAN,CAAgB;AAAEC,MAAAA;AAAF,KAAhB,EAA4BC,OAA5B,EAAqC;AACjC,UAAI;AACA,cAAMC,IAAI,GAAID,OAAO,CAACZ,KAAR,CAAcI,GAAf,GAAsB,aAAtB,GAAsC,UAAnD,CADA,CAEA;;AACA,cAAMU,UAAU,GAAG,MAAMrB,eAAe,CAACsB,GAAhB,CAAoBH,OAAO,CAACZ,KAA5B,CAAzB;AACAW,QAAAA,MAAM,CAAC;AAAEE,UAAAA,IAAI,EAAEA,IAAR;AAAcb,UAAAA,KAAK,EAAEY,OAAO,CAACZ;AAA7B,SAAD,CAAN;AACA,eAAOc,UAAP;AAEH,OAPD,CAOE,OAAOE,GAAP,EAAY;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCN,OAAO,CAACZ,KAA1C,EAAiDgB,GAAjD;AACA,cAAMA,GAAN;AACH;AACJ,KAbI;;AAeL,UAAMG,UAAN,CAAiB;AAAER,MAAAA;AAAF,KAAjB,EAA6B;AACzB,UAAI;AACA,cAAMhB,MAAM,GAAG,MAAMF,eAAe,CAAC2B,KAAhB,EAArB;AACAT,QAAAA,MAAM,CAAC;AAAEE,UAAAA,IAAI,EAAE,WAAR;AAAqBlB,UAAAA;AAArB,SAAD,CAAN;AACA,eAAOA,MAAP;AACH,OAJD,CAIE,OAAOqB,GAAP,EAAY;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CF,GAA3C;AACA,cAAMA,GAAN;AACH;AACJ;;AAxBI;AAxCE,CAAf","sourcesContent":["import { orderService } from '../../services/order-service.js'\r\nimport { NEWorderService } from '../../services/NEW-order-service.js'\r\n\r\nexport default {\r\n    state: {\r\n        orders: [],\r\n    },\r\n\r\n    getters: {\r\n        orders(state) {\r\n            // console.log('state.orders',state.orders);\r\n            return state.orders\r\n        },\r\n\r\n        ordersToShow(state) {\r\n            // console.log(this.user);\r\n            // console.log(this.orders);\r\n            // const orders = this.$store.getters.orders;\r\n            // return this.orders.filter((order) => order.buyer._id === this.user._id);\r\n        },\r\n\r\n    },\r\n\r\n    mutations: {\r\n        updateOrder(state, { order }) {\r\n            var idx = state.orders.findIndex(currOrder => currOrder._id === order._id)\r\n            state.orders.splice(idx, 1, order)\r\n        },\r\n        addOrder(state, { order }) {\r\n            state.orders.push(order)\r\n        },\r\n\r\n        setOrders(state, { orders }) {\r\n            state.orders = orders\r\n        },\r\n\r\n        // setUserOrders(state, { user }) {\r\n        //     console.log('useruser', user);\r\n        //     console.log('state.orders', state.orders);\r\n        // }\r\n\r\n    },\r\n\r\n    actions: {\r\n        async saveOrder({ commit }, payload) {\r\n            try {\r\n                const type = (payload.order._id) ? 'updateOrder' : 'addOrder';\r\n                // const savedOrder = await orderService.save(payload.order)\r\n                const savedOrder = await NEWorderService.add(payload.order)\r\n                commit({ type: type, order: payload.order })\r\n                return savedOrder\r\n\r\n            } catch (err) {\r\n                console.log('canntot save order', payload.order, err)\r\n                throw err\r\n            }\r\n        },\r\n\r\n        async loadOrders({ commit }) {\r\n            try {\r\n                const orders = await NEWorderService.query()\r\n                commit({ type: 'setOrders', orders })\r\n                return orders\r\n            } catch (err) {\r\n                console.log('err in loadOrders function:', err)\r\n                throw err\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n}"]}]}